<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Subtes Buenos Aires</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',sans-serif; }
        body { background:linear-gradient(135deg,#1a237e 0%,#311b92 100%); min-height:100vh; color:#333; }
        
        /* LOGIN */
        #login-screen { display:flex; justify-content:center; align-items:center; min-height:100vh; padding:20px; }
        .login-card { background:rgba(255,255,255,0.95); border-radius:20px; padding:40px; width:100%; max-width:400px; box-shadow:0 20px 60px rgba(0,0,0,0.3); text-align:center; }
        .login-title { color:#1a237e; font-size:1.8rem; margin-bottom:10px; }
        .login-subtitle { color:#5c6bc0; margin-bottom:30px; }
        .input-group { margin-bottom:20px; text-align:left; }
        .input-group label { display:block; margin-bottom:8px; color:#1a237e; font-weight:500; }
        .input-group input { width:100%; padding:15px; border:2px solid #ddd; border-radius:10px; font-size:16px; }
        .login-btn { width:100%; padding:16px; background:linear-gradient(135deg,#1a237e,#311b92); color:white; border:none; border-radius:10px; font-size:1.1rem; font-weight:bold; cursor:pointer; margin-top:10px; }
        .login-btn:hover { transform:translateY(-2px); }
        .demo-info { margin-top:20px; padding:15px; background:#e8eaf6; border-radius:10px; font-size:0.9rem; color:#5c6bc0; }

        /* DASHBOARD */
        .container { max-width:1200px; margin:0 auto; padding:20px; }
        #dashboard-content { display:none; }
        .dashboard-header { background:white; border-radius:20px; padding:25px 30px; margin-bottom:20px; box-shadow:0 5px 20px rgba(0,0,0,0.1); display:flex; justify-content:space-between; align-items:center; }
        .header-left h1 { color:#1a237e; font-size:1.8rem; display:flex; align-items:center; gap:10px; }
        .header-left p { color:#5c6bc0; margin-top:5px; }
        #estado-general { margin-top:10px; padding:8px 15px; background:#f8f9fa; border-radius:10px; font-weight:bold; text-align:center; }
        .logout-btn { padding:10px 20px; background:#e74c3c; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold; }

        /* ESTAD√çSTICAS */
        .wifi-panel { background:white; border-radius:15px; padding:25px; margin:20px 0; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
        .wifi-stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin:20px 0; }
        .wifi-stat { text-align:center; padding:20px; background:#f8f9fa; border-radius:10px; }
        .wifi-stat h3 { color:#5c6bc0; margin-bottom:10px; font-size:0.9rem; }
        .wifi-number { font-size:2.5rem; font-weight:bold; color:#1a237e; }
        .wifi-controls { display:flex; gap:15px; margin:20px 0; flex-wrap:wrap; justify-content:center; }
        .wifi-btn { padding:12px 25px; background:#1a237e; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold; }
        .wifi-btn:hover { background:#311b92; }

        /* BOT√ìN FIESTA */
        .fiesta-btn { background:linear-gradient(135deg,#FF0000,#00FF00,#0000FF); color:white; border:none; padding:15px 30px; border-radius:10px; font-size:1.1rem; font-weight:bold; cursor:pointer; margin:10px 0; width:100%; }

        /* MAPA */
        .map-container { background:white; border-radius:15px; padding:25px; margin:20px 0; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
        #map { height:450px; width:100%; border-radius:10px; border:2px solid #e8eaf6; margin-top:20px; }
        .map-controls { display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap; justify-content:center; }
        .map-btn { padding:8px 16px; background:#1a237e; color:white; border:none; border-radius:6px; cursor:pointer; }
        .map-btn.active { background:#2ecc71; }

        /* MODAL */
        .modal-backdrop { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; justify-content:center; align-items:center; z-index:2000; }
        .modal-content { background:white; padding:30px; border-radius:20px; max-width:500px; width:90%; max-height:90vh; overflow-y:auto; }

        /* NOTIFICACIONES */
        .notificacion { position:fixed; top:20px; right:20px; padding:15px 25px; border-radius:10px; color:white; font-weight:bold; z-index:3000; animation:slideIn 0.5s; box-shadow:0 5px 15px rgba(0,0,0,0.3); }
        @keyframes slideIn { from { transform:translateX(100px); opacity:0; } to { transform:translateX(0); opacity:1; } }

        @media (max-width:768px) { .dashboard-header { flex-direction:column; } .wifi-btn,.map-btn,.fiesta-btn { width:100%; } }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <!-- LOGIN -->
    <div id="login-screen">
        <div class="login-card">
            <h2 class="login-title">üöá SUBTES BUENOS AIRES</h2>
            <p class="login-subtitle">Sistema Inteligente de Control</p>
            <div class="input-group">
                <label for="password">Contrase√±a</label>
                <input type="password" id="password" placeholder="SUBTE2024 o vac√≠o">
            </div>
            <!-- üëá IMPORTANTE: SACAMOS EL onclick DE ACA -->
            <button class="login-btn" type="button">
                üîê INGRESAR AL SISTEMA
            </button>
            <div class="demo-info">Demo: SUBTE2024 o vac√≠o</div>
        </div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard-content" class="container">
        <div class="dashboard-header">
            <div class="header-left">
                <h1>üöá CONTROL CENTRAL SUBTES BA</h1>
                <p>104 Estaciones</p>
                <div id="estado-general">Cargando...</div>
            </div>
            <button class="logout-btn" onclick="logout()">üîì Cerrar sesi√≥n</button>
        </div>
        
        <div class="wifi-panel">
            <h2>üì° CONTROL</h2>
            <div class="wifi-stats">
                <div class="wifi-stat"><h3>CONECTADAS</h3><div class="wifi-number" id="wifi-connected">0</div><span id="wifi-percentage">0%</span></div>
                <div class="wifi-stat"><h3>DESCONECTADAS</h3><div class="wifi-number" id="wifi-disconnected">0</div></div>
                <div class="wifi-stat"><h3>TOTAL</h3><div class="wifi-number" id="wifi-total">104</div></div>
            </div>
            <div class="wifi-controls">
                <button onclick="conectarTodas()" class="wifi-btn">üì° CONECTAR TODAS</button>
                <button onclick="filtrarMapa('problemas')" class="wifi-btn">‚ö†Ô∏è PROBLEMAS</button>
            </div>
        </div>
        
        <button onclick="mostrarPanelFiestas()" class="fiesta-btn">üéâ MODO FIESTA</button>
        
        <div class="map-container">
            <h2>üó∫Ô∏è MAPA</h2>
            <div class="map-controls">
                <button class="map-btn active" onclick="filtrarMapa('todas')">Todas</button>
                <button class="map-btn" onclick="filtrarMapa('A')">A</button>
                <button class="map-btn" onclick="filtrarMapa('B')">B</button>
                <button class="map-btn" onclick="filtrarMapa('C')">C</button>
                <button class="map-btn" onclick="filtrarMapa('D')">D</button>
                <button class="map-btn" onclick="filtrarMapa('E')">E</button>
                <button class="map-btn" onclick="filtrarMapa('H')">H</button>
            </div>
            <div id="map"></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // ========== VARIABLES ==========
        let datosEstaciones = [];
        let mapa = null;
        let marcadores = [];
        let filtroActual = 'todas';

        // ========== LOGIN ==========
        function checkLogin() {
            const pass = document.getElementById('password').value;
            if (pass === 'SUBTE2024' || pass === '') {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('dashboard-content').style.display = 'block';
                iniciarSistema();
            } else {
                alert('Contrase√±a incorrecta. Us√° SUBTE2024');
            }
        }

        function logout() {
            document.getElementById('dashboard-content').style.display = 'none';
            document.getElementById('login-screen').style.display = 'flex';
        }

        // ========== EVENTOS ==========
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('.login-btn').addEventListener('click', checkLogin);
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkLogin();
            });
        });

        // ========== INICIALIZAR ==========
        function iniciarSistema() {
            cargarDatos();
            setTimeout(initMap, 500);
            setInterval(actualizarDatos, 10000);
        }

        function cargarDatos() {
            datosEstaciones = [
                { id:'A-01', nombre:'Plaza de Mayo', linea:'A', lat:-34.6083, lon:-58.3712, bateria:87, wifi:95 },
                { id:'A-02', nombre:'Per√∫', linea:'A', lat:-34.6085, lon:-58.3725, bateria:72, wifi:84 },
                { id:'B-06', nombre:'Plaza Once', linea:'B', lat:-34.6060, lon:-58.4030, bateria:68, wifi:71 },
                { id:'C-01', nombre:'Retiro', linea:'C', lat:-34.5915, lon:-58.3755, bateria:97, wifi:95 },
                { id:'D-01', nombre:'Catedral', linea:'D', lat:-34.6077, lon:-58.3731, bateria:94, wifi:92 },
                { id:'E-01', nombre:'Retiro E', linea:'E', lat:-34.5915, lon:-58.3755, bateria:93, wifi:90 },
                { id:'H-01', nombre:'Facultad Derecho', linea:'H', lat:-34.5820, lon:-58.3920, bateria:92, wifi:89 }
            ];
            actualizarStats();
        }

        function actualizarStats() {
            document.getElementById('wifi-connected').innerText = datosEstaciones.length;
            document.getElementById('wifi-disconnected').innerText = 0;
            document.getElementById('wifi-percentage').innerText = '100%';
            document.getElementById('estado-general').innerHTML = 
                '<span style="background:#2ecc71;color:white;padding:8px 15px;border-radius:20px;">‚úÖ 7 de 7 conectadas</span>';
        }

        function conectarTodas() {
            mostrarNotificacion('‚úÖ Todas conectadas', '#2ecc71');
        }

        // ========== MAPA ==========
        function initMap() {
            if (!document.getElementById('map')) return;
            mapa = L.map('map').setView([-34.6037, -58.3816], 12);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mapa);
            
            datosEstaciones.forEach(e => {
                let color = e.bateria > 70 ? '#2ecc71' : '#f39c12';
                let m = L.marker([e.lat, e.lon], { 
                    icon: L.divIcon({ html: `<div style="background:${color}; width:20px; height:20px; border-radius:50%; border:3px solid white;"></div>`, iconSize: [20,20] })
                }).addTo(mapa).bindPopup(`<b>${e.nombre}</b><br>L√≠nea ${e.linea}<br>üîã ${e.bateria}%`);
                marcadores.push(m);
            });
        }

        function filtrarMapa(l) { 
            filtroActual = l; 
            mostrarNotificacion(`Filtrando: ${l}`, '#3498db');
        }

        function mostrarPanelFiestas() { 
            alert('üéâ Modo fiesta simulado'); 
            let i=0, c=['#FF0000','#00FF00'];
            let int = setInterval(() => document.body.style.background = c[i++%2], 500);
            setTimeout(() => { clearInterval(int); document.body.style.background = 'linear-gradient(135deg, #1a237e 0%, #311b92 100%)'; }, 3000);
        }

        function mostrarNotificacion(m,c) {
            let n = document.createElement('div');
            n.className = 'notificacion';
            n.style.background = c;
            n.innerText = m;
            document.body.appendChild(n);
            setTimeout(() => n.remove(), 2000);
        }

        function actualizarDatos() { /* simulaci√≥n */ }
    </script>
</body>
</html>
